<!DOCTYPE html>
<html>
<head>
    <title>Checkout - HomeStock Express</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f8ff;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .payment-box {
            border: 3px solid #2563eb;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            background: #f0f7ff;
        }
        button {
            background: #10b981;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .warning-box {
            background: #fff3cd;
            border-left: 6px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè† HomeStock Express - Checkout</h1>
        
        <!-- WARNING BOX - PAYMENT FIRST -->
        <div class="warning-box">
            <h3>‚ö†Ô∏è PAYMENT REQUIRED BEFORE DELIVERY</h3>
            <p><strong>You must pay FIRST. We deliver AFTER payment confirmation.</strong></p>
            <p>1. Complete this form<br>
               2. Send payment to our numbers<br>
               3. We confirm payment on our phone<br>
               4. We deliver to you</p>
        </div>
        
        <!-- Order Summary -->
        <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Your Order:</h3>
            <div id="order-items">Loading your items...</div>
            <p style="font-size: 24px; color: #2563eb;"><strong>Total: $<span id="order-total">0.00</span></strong></p>
        </div>
        
        <!-- Payment Options -->
        <h2>üí≥ Choose Payment Method</h2>
        
        <div class="payment-box">
            <h3>üì± MPesa</h3>
            <p><strong>Send to:</strong> 0708592532</p>
            <p><strong>Business:</strong> HomeStock Express</p>
            <p><em>Include order number in reference</em></p>
        </div>
        
        <div class="payment-box">
            <h3>üì± Airtel Money</h3>
            <p><strong>Send to:</strong> 0789503762</p>
            <p><strong>Business:</strong> HomeStock Express</p>
            <p><em>Include order number in reference</em></p>
        </div>
        
        <div class="payment-box">
            <h3>üí≥ PayPal</h3>
            <p><strong>Send to:</strong> paypal.me/homestockexpress</p>
            <p><em>Include order details in note</em></p>
        </div>
        
        <!-- Delivery Form -->
        <h2>üöö Delivery Details</h2>
        
        <label>Your Full Name:</label>
        <input type="text" id="customer-name" placeholder="John Doe" required>
        
        <label>Your Phone Number:</label>
        <input type="tel" id="customer-phone" placeholder="0712 345 678" required>
        
        <label>Delivery Address (Full):</label>
        <textarea id="customer-address" placeholder="Street, Building, Apartment, City" rows="3" required></textarea>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label>Delivery Date:</label>
                <input type="date" id="delivery-date" required>
            </div>
            <div>
                <label>Preferred Time:</label>
                <select id="delivery-time" required>
                    <option value="9-12">9 AM - 12 PM</option>
                    <option value="12-3">12 PM - 3 PM</option>
                    <option value="3-6">3 PM - 6 PM</option>
                    <option value="6-9">6 PM - 9 PM</option>
                </select>
            </div>
        </div>
        
        <!-- Terms -->
        <div style="margin: 20px 0; padding: 15px; background: #f1f5f9; border-radius: 5px;">
            <p><input type="checkbox" id="agree-terms" required>
            <label for="agree-terms">I understand: <strong>PAYMENT FIRST, DELIVERY AFTER.</strong> I will send payment immediately after submitting this order.</label></p>
        </div>
        
        <!-- Submit Button -->
        <button onclick="placeOrder()">‚úÖ SUBMIT ORDER & GET PAYMENT INSTRUCTIONS</button>
        
        <p style="text-align: center; margin-top: 30px;">
            <a href="index.html" style="color: #2563eb; text-decoration: none;">‚Üê Back to Shopping</a>
        </p>
    </div>

    <script>
        // When page loads, show cart items
        window.onload = function() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const total = localStorage.getItem('total') || '0.00';
            
            const itemsDiv = document.getElementById('order-items');
            const totalSpan = document.getElementById('order-total');
            
            // Clear loading message
            itemsDiv.innerHTML = '';
            
            // Show each item
            if (cart.length === 0) {
                itemsDiv.innerHTML = '<p>Your cart is empty!</p>';
            } else {
                cart.forEach(item => {
                    const p = document.createElement('p');
                    p.textContent = `‚Ä¢ ${item.name} - $${item.price}`;
                    itemsDiv.appendChild(p);
                });
            }
            
            // Show total
            totalSpan.textContent = total;
            
            // Set today as minimum date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('delivery-date').min = today;
            
            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('delivery-date').value = tomorrow.toISOString().split('T')[0];
        };
        
        function placeOrder() {
            // Get all values
            const name = document.getElementById('customer-name').value;
            const phone = document.getElementById('customer-phone').value;
            const address = document.getElementById('customer-address').value;
            const date = document.getElementById('delivery-date').value;
            const time = document.getElementById('delivery-time').value;
            const agree = document.getElementById('agree-terms').checked;
            
            // Get cart info
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const total = localStorage.getItem('total') || '0.00';
            
            // Validate
            if (!name || !phone || !address || !date || !agree) {
                alert('Please fill ALL fields and agree to terms!');
                return;
            }
            
            if (cart.length === 0) {
                alert('Your cart is empty! Go back and add items.');
                return;
            }
            
            if (phone.length < 10) {
                alert('Please enter a valid phone number (10+ digits)');
                return;
            }
            
            // Create order number
            const orderNumber = 'HS' + Date.now().toString().slice(-6);
            
            // Format date nicely
            const deliveryDate = new Date(date).toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Get time window text
            const timeText = {
                '9-12': '9:00 AM - 12:00 PM',
                '12-3': '12:00 PM - 3:00 PM',
                '3-6': '3:00 PM - 6:00 PM',
                '6-9': '6:00 PM - 9:00 PM'
            }[time];
            
            // Create the IMPORTANT payment-first message
            const message = 
                'üö® ====== PAYMENT REQUIRED FIRST ====== üö®\n\n' +
                
                'üìã ORDER #: ' + orderNumber + '\n' +
                'üë§ NAME: ' + name + '\n' +
                'üì± PHONE: ' + phone + '\n\n' +
                
                'üõí YOUR ITEMS:\n' +
                cart.map(item => '‚Ä¢ ' + item.name + ' - $' + item.price).join('\n') + '\n\n' +
                
                'üí∞ TOTAL AMOUNT: $' + total + '\n\n' +
                
                'üìç DELIVERY TO:\n' + address + '\n' +
                'üìÖ DATE: ' + deliveryDate + '\n' +
                '‚è∞ TIME: ' + timeText + '\n\n' +
                
                'üí≥ ====== SEND PAYMENT NOW ======\n' +
                'CHOOSE ONE METHOD:\n\n' +
                '1. üì± MPESA:\n' +
                '   Send $' + total + ' to: 0712 345 678\n' +
                '   Reference: ' + orderNumber + '\n\n' +
                
                '2. üì± AIRTEL MONEY:\n' +
                '   Send $' + total + ' to: 0733 456 789\n' +
                '   Reference: ' + orderNumber + '\n\n' +
                
                '3. üí≥ PAYPAL:\n' +
                '   Send $' + total + ' to: paypal.me/homestockexpress\n' +
                '   Note: Order ' + orderNumber + '\n\n' +
                
                '‚è≥ ====== WHAT HAPPENS NEXT ======\n' +
                '1. YOU send payment NOW (choose one method above)\n' +
                '2. WE see payment on our phone\n' +
                '3. WE SMS you: "Payment received for order ' + orderNumber + '"\n' +
                '4. WE prepare your items\n' +
                '5. WE deliver on ' + deliveryDate + ' (' + timeText + ')\n' +
                '6. Driver will call you 30 mins before arrival\n\n' +
                
                'üö´ NO PAYMENT = NO DELIVERY\n' +
                '‚úÖ PAYMENT RECEIVED = DELIVERY AS SCHEDULED\n\n' +
                
                'üìû Questions? Call: YOUR-PHONE-NUMBER-HERE\n' +
                '‚è∞ Response time: 15 minutes during business hours';
            
            // Show message
            alert(message);
            
            // Clear the cart
            localStorage.removeItem('cart');
            localStorage.removeItem('total');
            
            // Redirect to home after 10 seconds
            setTimeout(function() {
                window.location.href = 'index.html';
            }, 10000);
        }
    </script>
</body>
</html>